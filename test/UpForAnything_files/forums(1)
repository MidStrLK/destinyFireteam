var __extends=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,t){n.__proto__=t}||function(n,t){for(var i in t)t.hasOwnProperty(i)&&(n[i]=t[i])};return function(t,i){function r(){this.constructor=t}n(t,i);t.prototype=i===null?Object.create(i):(r.prototype=i.prototype,new r)}}(),Bnet,ForumSidebar;(function(n){var t;(function(t){var i=function(n){function i(){return n.call(this,"Forums")||this}return __extends(i,n),i.prototype.addPages=function(n){n.add(".Forum.PublicForum",function(){return new t.RecruitmentNavPage});n.add(".Forum.Topics",function(){return new t.TopicsInit});n.add(".Forum.Post",function(){return new t.PostsInit})},i}(n.Site.Area);i.Instance=new i;t.ForumsArea=i;n.Site.setCurrentArea(i.Instance)})(t=n.Forums||(n.Forums={}))})(Bnet||(Bnet={}));__extends=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,t){n.__proto__=t}||function(n,t){for(var i in t)t.hasOwnProperty(i)&&(n[i]=t[i])};return function(t,i){function r(){this.constructor=t}n(t,i);t.prototype=i===null?Object.create(i):(r.prototype=i.prototype,new r)}}(),function(n){var t;(function(t){var i=function(t){function i(){return t!==null&&t.apply(this,arguments)||this}return __extends(i,t),i.prototype.initialize=function(){this.posts=new Posts(n.Site.getPageData("postId"),{forumType:Globals.ForumTypeEnum.Public,isLargeThread:n.Site.getPageData("isLargeThread"),sort:n.Site.getPageData("sort"),page:n.Site.getPageData("page"),path:n.Site.getPageData("path"),hasMore:n.Site.getPageData("hasMore"),showBanned:n.Site.getPageData("showBanned"),groupId:n.Site.getPageData("groupId")})},i.prototype.addListeners=function(){},i}(n.Site.PageInitializer);t.PostsInit=i})(t=n.Forums||(n.Forums={}))}(Bnet||(Bnet={}));__extends=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,t){n.__proto__=t}||function(n,t){for(var i in t)t.hasOwnProperty(i)&&(n[i]=t[i])};return function(t,i){function r(){this.constructor=t}n(t,i);t.prototype=i===null?Object.create(i):(r.prototype=i.prototype,new r)}}(),function(n){var t;(function(t){var i=function(t){function i(){return t!==null&&t.apply(this,arguments)||this}return __extends(i,t),i.prototype.initialize=function(){n.Site.PageController.Instance.ajaxSectionRegex=/\/Forums\/Topics/i;this.topics=new Topics({pageNumber:n.Site.getPageData("page"),forumType:n.Site.getPageData("forumType"),category:n.Site.getPageData("category"),sort:n.Site.getPageData("sort"),createdDate:n.Site.getPageData("dateFilter"),groupId:n.Site.getPageData("groupId"),tags:n.Site.getPageData("searchedTags"),activityOnPage:n.Site.getPageData("activityOnPage"),languages:n.Site.getPageData("languages")})},i.prototype.addListeners=function(){},i}(n.Site.PageInitializer);t.TopicsInit=i})(t=n.Forums||(n.Forums={}))}(Bnet||(Bnet={}));__extends=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,t){n.__proto__=t}||function(n,t){for(var i in t)t.hasOwnProperty(i)&&(n[i]=t[i])};return function(t,i){function r(){this.constructor=t}n(t,i);t.prototype=i===null?Object.create(i):(r.prototype=i.prototype,new r)}}(),function(n){var t;(function(t){var r=function(n){function t(){return n!==null&&n.apply(this,arguments)||this}return __extends(t,n),t.prototype.initialize=function(){if($(".recruitmentSideNav").length)var n=new i(this.eventBinder)},t.prototype.addListeners=function(){},t.prototype.destroy=function(){},t}(n.Site.PageInitializer),i;t.RecruitmentNavPage=r;i=function(){function t(n){this.eventBinder=n;this.initialize()}return t.prototype.initialize=function(){this.getRecruitmentConfig();this.$containerEl=$(".recruitmentSideNav");this.$platformSwitcher=this.$containerEl.find(".platformSwitcher");this.$navItems=this.$containerEl.find(".navItem");this.addListeners();var n=this.getPlatformTag();this.markPlatformSwitcherOnState(n);this.showOnlyPlatformItems(n)},t.prototype.addListeners=function(){var t=this;this.$platformSwitcher.find("a").addClass("exempt");this.eventBinder.for(this.$platformSwitcher.find("a")).on("click",function(i){var u,f,r,e;i.preventDefault();u=$(i.currentTarget);u.hasClass("on")||(f=t.getIndexOfOriginalElement(),r=u.attr("data-platform"),t.markPlatformSwitcherOnState(r),e=t.getCorrespondingActivityUrl(f,r),t.showOnlyPlatformItems(r),n.Site.PageController.Instance.processRedirect(e))})},t.prototype.getIndexOfOriginalElement=function(){return this.$navItems.filter(".show").index(this.$navItems.filter(".on"))},t.prototype.getCorrespondingActivityUrl=function(n,t){return this.$navItems.filter("."+t).find("a").eq(n).attr("href")},t.prototype.showOnlyPlatformItems=function(n){this.$navItems.filter("."+n).addClass("show").siblings(":not(li."+n+")").removeClass("show")},t.prototype.getRecruitmentConfig=function(){this.recruitmentConfig=n.Site.getPageDataOrDefault("recruitmentConfig",{})},t.prototype.markPlatformSwitcherOnState=function(n){this.$platformSwitcher.find("[data-platform="+n+"]").addClass("on").siblings(".on").removeClass("on")},t.prototype.getPlatformTag=function(){var n="",t;for(t in this.recruitmentConfig.PlatformTags)window.location.href.indexOf(t)>-1?n=t:$("#content_topics[data-platform]").length&&$("#content_topics[data-platform]").attr("data-platform").toLowerCase()===t.toLowerCase()&&(n=t);return n===""&&(n=this.recruitmentConfig.DefaultPlatformTag),n},t}();t.RecruitmentNav=i})(t=n.Forums||(n.Forums={}))}(Bnet||(Bnet={}));ForumSidebar=function(){this.taggleFollowedList;this.addEventListeners()};ForumSidebar.prototype.addEventListeners=function(){$("#Nav_Forum").on("click",".trigger .expandIcon",function(n,t){n.stopImmediatePropagation();n.preventDefault();var i=$(this);i.closest(".navItem").hasClass("opened")?i.closest(".navItem").removeClass("opened"):(i.closest(".navItem").addClass("opened"),i.closest(".container_followedTagsList").length&&(typeof this.taggleFollowedList=="undefined"&&(this.taggleFollowedList=new Taggle("followedTagsList",{placeholder:Localizer.Forums.entertags,tags:followedTags,onTagAdd:function(n,t){t=Utility.GetValidTags(t);bungieNetPlatform.activityService.FollowTag(t,function(){var n={"0":t,"2":PageUrls.profilePage+"/254/"+myID_cookie+"#context=membership&tab=tags"},i=Localizer.fnStringReplace(Localizer.Community.followingtagconfirmationmessage,n);Utility.alertSuccess(i,Globals.SuccessMessages.Following);$("#alert").addClass("follow")},function(n){Utility.alert(n.errorMessage)})},onTagRemove:function(n,t){bungieNetPlatform.activityService.UnfollowTag(t,function(){viewModels.myFollowedTagsModel.remove(function(n){return n.detail.displayName.toLowerCase()==t.toLowerCase()})},function(n){Utility.alert(n.errorMessage)})}}),$("#followedTagsList .taggle_input").focus()),typeof t!="undefined"&&typeof t.tag!="undefined"&&this.taggleFollowedList.add(t.tag.replace("#",""))))});$("#Nav_Forum").on("click.tagnav",".taggle",function(n){n.preventDefault();Bnet.Site.PageController.Instance.stateChange(PageUrls.defaultTopicsPage+"/0/Default/None/"+$(this).find(".taggle_text").text().replace("#",""),!0)})}